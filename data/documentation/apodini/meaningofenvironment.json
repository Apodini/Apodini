{"primaryContentSections":[{"kind":"content","content":[{"anchor":"Overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The "},{"type":"codeVoice","code":"@Environment"},{"type":"text","text":" property wrapper provides different functionality depending on the "},{"type":"codeVoice","code":"wrappedValue"},{"type":"text","text":". For more detail on how the "},{"type":"codeVoice","code":"wrappedValue"},{"type":"text","text":" is provided to the environment and what values are provided by the Apodini framework refer to "},{"type":"strong","inlineContent":[{"type":"text","text":"RequestAndEnvironment"}]},{"type":"text","text":"."}]},{"anchor":"Connection","level":2,"type":"heading","text":"Connection"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Apodini provides a "},{"type":"codeVoice","code":"Connection"},{"type":"text","text":" through the environment. This object can be accessed using "},{"type":"codeVoice","code":"@Environment(\\.connection)"},{"type":"text","text":". The "},{"type":"codeVoice","code":"Connection"},{"type":"text","text":" provides useful protocol-agnostic information about the current state of the communication."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The most important property of "},{"type":"codeVoice","code":"Connection"},{"type":"text","text":" is "},{"type":"codeVoice","code":"state: ConnectionState"},{"type":"text","text":". This state can be "},{"type":"codeVoice","code":".open"},{"type":"text","text":" or "},{"type":"codeVoice","code":".end"},{"type":"text","text":", where "},{"type":"codeVoice","code":".end"},{"type":"text","text":" signalizes that the protocol expects the connection to be closed now. The "},{"type":"codeVoice","code":"Handler"},{"type":"text","text":" may be destructed after the next evaluation. It should return "},{"type":"codeVoice","code":".end"},{"type":"text","text":" or "},{"type":"codeVoice","code":".final(E)"},{"type":"text","text":" now. A change to "},{"type":"codeVoice","code":"Connection.state"},{"type":"text","text":" is handled the same as a change to "},{"type":"codeVoice","code":"@Parameter"},{"type":"text","text":", i.e. "},{"type":"strong","inlineContent":[{"type":"text","text":"one"}]},{"type":"text","text":" client-message that includes updates to "},{"type":"codeVoice","code":"@Parameter"},{"type":"text","text":"s and "},{"type":"codeVoice","code":"Connection.state"},{"type":"text","text":" results in "},{"type":"strong","inlineContent":[{"type":"text","text":"one"}]},{"type":"text","text":" evaluation; "},{"type":"strong","inlineContent":[{"type":"text","text":"one"}]},{"type":"text","text":" client-message that does not update any "},{"type":"codeVoice","code":"@Parameter"},{"type":"text","text":"s but does update "},{"type":"codeVoice","code":"Connection.state"},{"type":"text","text":" also results in "},{"type":"strong","inlineContent":[{"type":"text","text":"one"}]},{"type":"text","text":" evaluation of the "},{"type":"codeVoice","code":"Handler"},{"type":"text","text":"."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The "},{"type":"codeVoice","code":"Connection"},{"type":"text","text":" could provide a "},{"type":"codeVoice","code":"start: Date"},{"type":"text","text":" so the service could e.g. close connections with an timeout error."}]},{"anchor":"NotificationCenter","level":2,"type":"heading","text":"NotificationCenter"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The "},{"type":"codeVoice","code":"NotificationCenter"},{"type":"text","text":" is used to send push notifications to APNS. It can be used in a "},{"type":"codeVoice","code":"Handler`` using "},{"type":"text","text":"@Environment(.notificationCenter)`. Refer to "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Apodini\/documentation\/Apodini\/PushNotifications"},{"type":"text","text":" for more information."}]}]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/apodini\/meaningofenvironment"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/Apodini\/documentation\/Apodini\/MeaningOfEnvironment","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"Description of Environment property wrapper and its usage in Apodini."}],"kind":"article","metadata":{"roleHeading":"Article","title":"Environment","role":"collectionGroup","modules":[{"name":"Apodini"}]},"hierarchy":{"paths":[["doc:\/\/Apodini\/documentation\/Apodini","doc:\/\/Apodini\/documentation\/Apodini\/CommunicationPattern","doc:\/\/Apodini\/documentation\/Apodini\/Tooling"]]},"seeAlsoSections":[{"title":"Tooling","identifiers":["doc:\/\/Apodini\/documentation\/Apodini\/MeaningOfParameter","doc:\/\/Apodini\/documentation\/Apodini\/MeaningOfState","doc:\/\/Apodini\/documentation\/Apodini\/MeaningOfObservedObject"],"generated":true}],"references":{"doc://Apodini/documentation/Apodini/PushNotifications":{"role":"collectionGroup","title":"Push Notifications","abstract":[{"type":"text","text":"A guide to use push notifications in Apodini."}],"identifier":"doc:\/\/Apodini\/documentation\/Apodini\/PushNotifications","kind":"article","type":"topic","url":"\/documentation\/apodini\/pushnotifications"},"doc://Apodini/documentation/Apodini":{"role":"collection","title":"Apodini","abstract":[{"type":"text","text":"A declarative, composable framework to build web services using Swift."}],"identifier":"doc:\/\/Apodini\/documentation\/Apodini","kind":"symbol","type":"topic","url":"\/documentation\/apodini"},"doc://Apodini/documentation/Apodini/MeaningOfState":{"role":"article","title":"State","abstract":[{"type":"text","text":"Description of State property wrapper and its usage in Apodini."}],"identifier":"doc:\/\/Apodini\/documentation\/Apodini\/MeaningOfState","kind":"article","type":"topic","url":"\/documentation\/apodini\/meaningofstate"},"doc://Apodini/documentation/Apodini/MeaningOfParameter":{"role":"article","title":"Parameter","abstract":[{"type":"text","text":"Specifying input for endpoints with Parameter property wrapper in Apodini."}],"identifier":"doc:\/\/Apodini\/documentation\/Apodini\/MeaningOfParameter","kind":"article","type":"topic","url":"\/documentation\/apodini\/meaningofparameter"},"doc://Apodini/documentation/Apodini/Tooling":{"role":"collectionGroup","title":"Tooling","abstract":[{"type":"text","text":"Description service structure for endpoints."}],"identifier":"doc:\/\/Apodini\/documentation\/Apodini\/Tooling","kind":"article","type":"topic","url":"\/documentation\/apodini\/tooling"},"doc://Apodini/documentation/Apodini/CommunicationPattern":{"role":"collectionGroup","title":"Communication Pattern","abstract":[{"type":"text","text":"Communication patterns and their usage in different client-service protocols."}],"identifier":"doc:\/\/Apodini\/documentation\/Apodini\/CommunicationPattern","kind":"article","type":"topic","url":"\/documentation\/apodini\/communicationpattern"},"doc://Apodini/documentation/Apodini/MeaningOfObservedObject":{"role":"article","title":"ObservedObject","abstract":[{"type":"text","text":"Description of ObservedObject property wrapper and its usage in Apodini."}],"identifier":"doc:\/\/Apodini\/documentation\/Apodini\/MeaningOfObservedObject","kind":"article","type":"topic","url":"\/documentation\/apodini\/meaningofobservedobject"}}}