{"seeAlsoSections":[{"title":"Advanced","identifiers":["doc:\/\/Apodini\/documentation\/Apodini\/BuildingExporters","doc:\/\/Apodini\/documentation\/Apodini\/HandlerDelegation","doc:\/\/Apodini\/documentation\/Apodini\/ProtocolBuffers","doc:\/\/Apodini\/documentation\/Apodini\/ExporterConfiguration","doc:\/\/Apodini\/documentation\/Apodini\/RetrieveRelationship","doc:\/\/Apodini\/documentation\/Apodini\/DSLComponents","doc:\/\/Apodini\/documentation\/Apodini\/Semantic-Model","doc:\/\/Apodini\/documentation\/Apodini\/Inter-Component-Communication"],"generated":true}],"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[],"primaryContentSections":[{"kind":"content","content":[{"anchor":"Overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"All types of client-service communication consist of "},{"type":"emphasis","inlineContent":[{"type":"text","text":"messages"}]},{"type":"text","text":". A message can be sent from client to service ("},{"type":"emphasis","inlineContent":[{"type":"text","text":"client-message"}]},{"type":"text","text":") or from service to client ("},{"type":"emphasis","inlineContent":[{"type":"text","text":"service-message"}]},{"type":"text","text":")."}]},{"anchor":"Schema-Notation","level":3,"type":"heading","text":"Schema Notation"},{"anchor":"Semantics","level":4,"type":"heading","text":"Semantics:"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"()"},{"type":"text","text":": unsolicited event (an event that is not captured by client-service communication protocols)"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"[x]"},{"type":"text","text":": array of "},{"type":"codeVoice","code":"x"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"x -> y"},{"type":"text","text":": "},{"type":"codeVoice","code":"x"},{"type":"text","text":" triggers "},{"type":"codeVoice","code":"y"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"x -?> y"},{"type":"text","text":": "},{"type":"codeVoice","code":"x"},{"type":"text","text":" can trigger "},{"type":"codeVoice","code":"y"}]}]}]},{"anchor":"Example","level":4,"type":"heading","text":"Example:"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The schema "},{"type":"codeVoice","code":"() -?> client-message -> service-message"},{"type":"text","text":" translates to: “An unsolicited event "},{"type":"strong","inlineContent":[{"type":"text","text":"may"}]},{"type":"text","text":" trigger the client to send a message to the service, which then "},{"type":"strong","inlineContent":[{"type":"text","text":"always"}]},{"type":"text","text":" results in the service sending a message back to the client.”"}]},{"anchor":"Distinct-Patterns-in-Client-Service-Communication","level":3,"type":"heading","text":"Distinct Patterns in Client-Service Communication"},{"type":"paragraph","inlineContent":[{"type":"text","text":"All client-service communication protocols\/frameworks (exported by Apodini) each support a subset of the following classes of client-service communication:"}]},{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Request-Response"}]},{"type":"text","text":": A single request is answered by a single response"},{"type":"text","text":" "},{"type":"text","text":"schema: "},{"type":"codeVoice","code":"() -?> client-message -> service-message"},{"type":"text","text":""},{"type":"text","text":" "},{"type":"text","text":"supported by: HTTP1.x, HTTP2.0, GraphQL, gRPC, WebSocket"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Client-Side Stream"}]},{"type":"text","text":": Multiple requests by a client that are terminated by a single response from the web service"},{"type":"text","text":" "},{"type":"text","text":"schema: "},{"type":"codeVoice","code":"() -?> [client-message] -> service-message"},{"type":"text","text":" "},{"type":"text","text":"supported by: gRPC, WebSocket"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Service-Side Stream"}]},{"type":"text","text":": A single response is answered by multiple responses that are terminated by the web service"},{"type":"text","text":" "},{"type":"text","text":"schema: "},{"type":"codeVoice","code":"() -?> client-message -> [service-message]"},{"type":"text","text":""},{"type":"text","text":" "},{"type":"text","text":"supported by: HTTP2.0, GraphQL (subscriptions), gRPC, WebSocket"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Bidirectional Stream"}]},{"type":"text","text":": An open communication channel where both parties can send messages at any time. The connection is terminated by either the client or web service"},{"type":"text","text":" "},{"type":"text","text":"schema: "},{"type":"codeVoice","code":"() -?> client-message <?-?> service-message <?- ()"},{"type":"text","text":" "},{"type":"text","text":"supported by: gRPC, WebSocket"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Unsolicited Message"}]},{"type":"text","text":": An unsolicited message that is sent to an "},{"type":"emphasis","inlineContent":[{"type":"text","text":"unspecified addressee"}]},{"type":"text","text":" from the web service based on some event"},{"type":"text","text":" "},{"type":"text","text":"schema: "},{"type":"codeVoice","code":"() -?> service-message"},{"type":"text","text":" "},{"type":"text","text":"supported by: APNS"}]}]}]},{"anchor":"Apodinis-Paradigm","level":2,"type":"heading","text":"Apodini’s Paradigm"},{"type":"paragraph","inlineContent":[{"type":"text","text":"In general Apodini aims to provide a declarative DSL that is "},{"type":"strong","inlineContent":[{"type":"text","text":"by default agnostic"}]},{"type":"text","text":" of the exported communication protocols. However, the DSL also allows for "},{"type":"strong","inlineContent":[{"type":"text","text":"customization"}]},{"type":"text","text":" of the service’s behavior for single exporters in a "},{"type":"strong","inlineContent":[{"type":"text","text":"protocol-specific"}]},{"type":"text","text":" way. This also applies to Apodini’s API for handling all of the above communication-patterns."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The problem is that certain classes of client-service communication are not supported by all communication protocols. The developer can create an endpoint that makes use of a more advanced pattern but exporters responsible for a protocol that does not fully support this pattern cannot export the exact functionality as described by the developer."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Apodini seeks to solve this problem by "},{"type":"strong","inlineContent":[{"type":"text","text":"not committing to a specific pattern"}]},{"type":"text","text":" in the DSL with each pattern having its own API, but instead "},{"type":"strong","inlineContent":[{"type":"text","text":"providing tools to the developer that may have downgraded functionality based on the exporter"}]},{"type":"text","text":", the associated protocol and its restrictions."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"This implies two necessities for Apodini’s API in order to stay protocol-agnostic by default:"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Firstly, Apodini’s API must not explicitly mark an endpoint as an instance of one of our five communication patterns."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Secondly, Apodini’s API must be flexible enough so that the "},{"type":"strong","inlineContent":[{"type":"text","text":"decision, which pattern is used"}]},{"type":"text","text":" to implement a specific endpoint, can be "},{"type":"strong","inlineContent":[{"type":"text","text":"made by each exporter on its own"}]},{"type":"text","text":"."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"In order to achieve this goal, Apodini utilizes a SwiftUI-like approach allowing the developer to express their endpoint’s logic using a "},{"type":"emphasis","inlineContent":[{"type":"text","text":"function of a state"}]},{"type":"text","text":" paradigm. In order to support this paradigm, Apodini provides different "},{"type":"emphasis","inlineContent":[{"type":"text","text":"property wrappers"}]},{"type":"text","text":" which are dynamically managed by Apodini. Those property wrappers influence the control-flow, i.e. when the developer’s logic is executed and when messages are sent. These “tools” make up Apodini’s API for implementing an endpoint’s logic. However, the resulting behavior may differ from exporter to exporter."}]},{"anchor":"Further-Reading","level":2,"type":"heading","text":"Further Reading"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The chapter "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Apodini\/documentation\/Apodini\/Tooling"},{"type":"text","text":" describes our vision on how Apodini’s API for implementing an endpoint’s logic will look like. This also includes information on how certain exporters might interact with different property wrappers."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Chapter "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Apodini\/documentation\/Apodini\/PatternImplementation"},{"type":"text","text":" details how the tools presented in chapter 2. can be used to implement the communication patterns listed in this document."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"For the implementation of the Unsolicited Message pattern for push notification services refer to "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Apodini\/documentation\/Apodini\/PushNotifications"},{"type":"text","text":"."}]}]}],"variants":[{"paths":["\/documentation\/apodini\/communicationpattern"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/Apodini\/documentation\/Apodini\/CommunicationPattern","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"Communication patterns and their usage in different client-service protocols."}],"kind":"article","metadata":{"modules":[{"name":"Apodini"}],"role":"collectionGroup","title":"Communication Pattern"},"hierarchy":{"paths":[["doc:\/\/Apodini\/documentation\/Apodini"]]},"topicSections":[{"title":"Tooling","identifiers":["doc:\/\/Apodini\/documentation\/Apodini\/Tooling"]},{"title":"Pattern Implementation","identifiers":["doc:\/\/Apodini\/documentation\/Apodini\/PatternImplementation","doc:\/\/Apodini\/documentation\/Apodini\/RequestResponse","doc:\/\/Apodini\/documentation\/Apodini\/ClientSideStream","doc:\/\/Apodini\/documentation\/Apodini\/ServiceSideStream","doc:\/\/Apodini\/documentation\/Apodini\/BidirectionalStream"]}],"references":{"doc://Apodini/documentation/Apodini/RequestResponse":{"role":"article","title":"Request-Response","abstract":[{"type":"text","text":"Usage of Request and Response pattern."}],"identifier":"doc:\/\/Apodini\/documentation\/Apodini\/RequestResponse","kind":"article","type":"topic","url":"\/documentation\/apodini\/requestresponse"},"doc://Apodini/documentation/Apodini/BuildingExporters":{"role":"collectionGroup","title":"Building Exporters","abstract":[{"type":"text","text":"Writing a web service with Apodini is easy - as long as there are "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Apodini\/documentation\/Apodini\/InterfaceExporter"},{"type":"text","text":"s suitable for your purposes. If that is not the case, you might need to adapt one, or build a new one."}],"identifier":"doc:\/\/Apodini\/documentation\/Apodini\/BuildingExporters","kind":"article","type":"topic","url":"\/documentation\/apodini\/buildingexporters"},"doc://Apodini/documentation/Apodini/RetrieveRelationship":{"role":"collectionGroup","title":"Retrieving Relationship Information","abstract":[{"type":"text","text":"This proposal describes how relationship information can be generated from the DSL, introduces some concepts"},{"type":"text","text":" "},{"type":"text","text":"to give hints for relationship retrieval and adds mechanisms to manually define hints."}],"identifier":"doc:\/\/Apodini\/documentation\/Apodini\/RetrieveRelationship","kind":"article","type":"topic","url":"\/documentation\/apodini\/retrieverelationship"},"doc://Apodini/documentation/Apodini":{"role":"collection","title":"Apodini","abstract":[{"type":"text","text":"A declarative, composable framework to build web services using Swift."}],"identifier":"doc:\/\/Apodini\/documentation\/Apodini","kind":"symbol","type":"topic","url":"\/documentation\/apodini"},"doc://Apodini/documentation/Apodini/PushNotifications":{"role":"collectionGroup","title":"Push Notifications","abstract":[{"type":"text","text":"A guide to use push notifications in Apodini."}],"identifier":"doc:\/\/Apodini\/documentation\/Apodini\/PushNotifications","kind":"article","type":"topic","url":"\/documentation\/apodini\/pushnotifications"},"doc://Apodini/documentation/Apodini/PatternImplementation":{"role":"article","title":"Pattern Implementation","abstract":[{"type":"text","text":"Implemented communication patterns."}],"identifier":"doc:\/\/Apodini\/documentation\/Apodini\/PatternImplementation","kind":"article","type":"topic","url":"\/documentation\/apodini\/patternimplementation"},"doc://Apodini/documentation/Apodini/HandlerDelegation":{"role":"collectionGroup","title":"Delegating Handlers","abstract":[{"type":"text","text":"Defining reusable and assertive "},{"type":"codeVoice","code":"Handler"},{"type":"text","text":"s."}],"identifier":"doc:\/\/Apodini\/documentation\/Apodini\/HandlerDelegation","kind":"article","type":"topic","url":"\/documentation\/apodini\/handlerdelegation"},"doc://Apodini/documentation/Apodini/ExporterConfiguration":{"role":"collectionGroup","title":"Configuration of Exporters","abstract":[{"type":"text","text":"Extensive configuration options for Apodini Exporters."}],"identifier":"doc:\/\/Apodini\/documentation\/Apodini\/ExporterConfiguration","kind":"article","type":"topic","url":"\/documentation\/apodini\/exporterconfiguration"},"doc://Apodini/documentation/Apodini/Tooling":{"role":"collectionGroup","title":"Tooling","abstract":[{"type":"text","text":"Description service structure for endpoints."}],"identifier":"doc:\/\/Apodini\/documentation\/Apodini\/Tooling","kind":"article","type":"topic","url":"\/documentation\/apodini\/tooling"},"doc://Apodini/documentation/Apodini/ClientSideStream":{"role":"article","title":"Client-Side Stream","abstract":[{"type":"text","text":"Provide an implementation of a client-side stream."}],"identifier":"doc:\/\/Apodini\/documentation\/Apodini\/ClientSideStream","kind":"article","type":"topic","url":"\/documentation\/apodini\/clientsidestream"},"doc://Apodini/documentation/Apodini/Semantic-Model":{"role":"collectionGroup","title":"Semantic Model","abstract":[{"type":"text","text":"The semantic model is an intermediary model that is somewhere in the middle between the web service declaration you write using the Apodini DSL and the behavior of the web service."}],"identifier":"doc:\/\/Apodini\/documentation\/Apodini\/Semantic-Model","kind":"article","type":"topic","url":"\/documentation\/apodini\/semantic-model"},"doc://Apodini/documentation/Apodini/Inter-Component-Communication":{"role":"article","title":"Inter-Component Communication","abstract":[{"type":"text","text":"Web services deployed with Apodini Deployer can be distributed across different nodes. Inter-component communication enables the communication between components between these nodes."}],"identifier":"doc:\/\/Apodini\/documentation\/Apodini\/Inter-Component-Communication","kind":"article","type":"topic","url":"\/documentation\/apodini\/inter-component-communication"},"doc://Apodini/documentation/Apodini/ProtocolBuffers":{"role":"collectionGroup","title":"Protocol Buffers","abstract":[{"type":"text","text":"Describe how to export the webservice via IDL exporter."}],"identifier":"doc:\/\/Apodini\/documentation\/Apodini\/ProtocolBuffers","kind":"article","type":"topic","url":"\/documentation\/apodini\/protocolbuffers"},"doc://Apodini/documentation/Apodini/BidirectionalStream":{"role":"collectionGroup","title":"Bidirectional Stream","abstract":[{"type":"text","text":"Provide a code example of bidirectional streams."}],"identifier":"doc:\/\/Apodini\/documentation\/Apodini\/BidirectionalStream","kind":"article","type":"topic","url":"\/documentation\/apodini\/bidirectionalstream"},"doc://Apodini/documentation/Apodini/ServiceSideStream":{"role":"article","title":"Service-Side Stream","abstract":[{"type":"text","text":"Provide a code example of service-side stream."}],"identifier":"doc:\/\/Apodini\/documentation\/Apodini\/ServiceSideStream","kind":"article","type":"topic","url":"\/documentation\/apodini\/servicesidestream"},"doc://Apodini/documentation/Apodini/InterfaceExporter":{"role":"symbol","title":"InterfaceExporter","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"InterfaceExporter"}],"abstract":[{"type":"text","text":"An "},{"type":"reference","isActive":true,"identifier":"doc:\/\/Apodini\/documentation\/Apodini\/InterfaceExporter"},{"type":"text","text":" is a type which requires access to the web service’s structure and"},{"type":"text","text":" "},{"type":"text","text":"internals."}],"identifier":"doc:\/\/Apodini\/documentation\/Apodini\/InterfaceExporter","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"InterfaceExporter"}],"url":"\/documentation\/apodini\/interfaceexporter"},"doc://Apodini/documentation/Apodini/DSLComponents":{"role":"collectionGroup","title":"DSL Components","abstract":[{"type":"text","text":"Apodini DSL central building blocks."}],"identifier":"doc:\/\/Apodini\/documentation\/Apodini\/DSLComponents","kind":"article","type":"topic","url":"\/documentation\/apodini\/dslcomponents"}}}